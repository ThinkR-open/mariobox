---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)

cat_pipework_yaml <- function(path_pipo) {
  cat(
    paste0(
      readLines(
        file.path(path_pipo, "inst/pipework.yml")
      ),
      "\n"
    )
  )
}
```

# {pipework}

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![CRAN status](https://www.r-pkg.org/badges/version/pipework)](https://CRAN.R-project.org/package=pipework)
<!-- badges: end -->

The goal of pipework is to provide a framework for packaging {plumber} APIs,
the same way {golem} is a framework for packaging {shiny} apps.

## Installation

You can install the development version of pipework from [GitHub](https://github.com/) with:

``` r
# install.packages("remotes")
remotes::install_github("ThinkR-Open/pipework")
```

## Example

```{r}
library(pipework)
```

### Creating a new pipework project:

```{r}
path_pipo <- tempfile(pattern = "pipo")
create_pipework(
  path = path_pipo,
  open = FALSE
)
```

```{r}
fs::dir_tree(path_pipo)
```

```{r, echo=FALSE}
cat_pipework_yaml(path_pipo)
```

### Add/Remove endpoints

```{r}
pw_add_endpoint(
  name = "allo",
  methods  = "GET",
  open = FALSE,
  pkg = path_pipo
)
```

```{r}
fs::dir_tree(path_pipo)
```

```{r, echo=FALSE}
cat_pipework_yaml(path_pipo)
```

```{r}
pw_remove_endpoint(
  name = "allo",
  pkg = path_pipo
)
```


```{r}
fs::dir_tree(path_pipo)
```

```{r, echo=FALSE}
cat_pipework_yaml(path_pipo)
```
